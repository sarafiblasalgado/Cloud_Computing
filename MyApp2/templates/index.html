<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Monthly Expense Tracker</title>
  <link rel="stylesheet" href="/static/css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <main class="container">
    <h1>Monthly Expense Tracker</h1>
 
    <section id="chart-section">
      <div class="chart-left">
        <div class="chart-header">
          <h2>Budget Allocations</h2>
          <div id="salary-input">
            <label>Monthly salary (€): <input id="salary" type="number" step="0.01" value="3000"></label>
          </div>
        </div>

        <div class="chart-wrapper">
          <canvas id="expenseChart"></canvas>
        </div>

        <div id="budget-message" class="budget-message" role="status" aria-live="polite"></div>
      </div>

      <div id="alloc-legend"></div>
    </section>

    <section id="controls">
      <h2>Add Expense</h2>
      <form id="add-form">
        <label>Amount: <input type="number" step="0.01" name="amount" required></label>
        <label>Category:
          <!-- native select kept for form value but hidden; custom dropdown shown below -->
          <select id="category-select" name="category" required class="hidden-select"></select>
          <div id="category-dropdown" class="custom-select" role="listbox" tabindex="0" aria-label="Category">
            <button id="category-button" type="button" class="custom-select-btn">
              <span class="left">
                <span id="category-button-swatch" class="category-swatch" aria-hidden="true"></span>
                <span id="category-button-label">Select</span>
              </span>
              <span class="caret">▾</span>
            </button>
            <ul id="category-options" class="custom-options" role="presentation"></ul>
          </div>
        </label>
        <label>Date: <input type="date" name="date"></label>
        <button type="submit" class="btn-primary">Add</button>
      </form>

      <h2>Data Management</h2>
      <div class="import-export">
        <div class="tiles">
          <button id="export-csv" class="tile action export" title="Export CSV" type="button">
            <span class="tile-icon" aria-hidden="true">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <polyline points="7 10 12 15 17 10" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <line x1="12" y1="15" x2="12" y2="3" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
            <span class="tile-label">Export</span>
            <small class="tile-sub">CSV</small>
          </button>

          <input id="import-file" class="hidden-file" type="file" accept="text/csv" />
          <label for="import-file" class="tile action choose" title="Choose CSV file">
            <span class="tile-icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h4l2 3h8a2 2 0 0 1 2 2z" fill="white"/>
              </svg>
            </span>
            <span class="tile-label">Choose</span>
            <small class="tile-sub">CSV</small>
          </label>

          <button id="import-csv" class="tile action import" title="Import CSV" type="button">
            <span class="tile-icon" aria-hidden="true">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <polyline points="17 14 12 9 7 14" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <line x1="12" y1="9" x2="12" y2="21" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
            <span class="tile-label">Upload</span>
            <small class="tile-sub">CSV</small>
          </button>
        </div>

        <div class="import-meta">
          <span id="import-filename" class="filename hint"></span>
          <span id="import-status" class="status hint"></span>
        </div>
      </div>

      <h2>Existing Expenses</h2>
      <div id="expenses-list-container">
        <ul id="expenses-list"></ul>
      </div>
    </section>
  </main>

  <script src="/static/js/main.js"></script>
</body>
</html>
